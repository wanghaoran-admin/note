### 1.docker简介

Docker 是一个应用打包、分发、部署的工具,

可以把它理解为一个轻量的虚拟机，它只虚拟你软件需要的运行环境，多余的一点都不要，

而普通虚拟机则是一个完整而庞大的系统，包含各种不管你要不要的软件。





### 2.跟普通虚拟机的对比

| 特性   | 普通虚拟机                                                   | Docker                                               |
| ------ | ------------------------------------------------------------ | ---------------------------------------------------- |
| 跨平台 | 通常只能在桌面级系统运行，例如 Windows/Mac，无法在不带图形界面的服务器上运行 | 支持的系统非常多，各类 windows 和 Linux 都支持       |
| 性能   | 性能损耗大，内存占用高，因为是把整个完整系统都虚拟出来了     | 性能好，只虚拟软件所需运行环境，最大化减少没用的配置 |
| 自动化 | 需要手动安装所有东西                                         | 一个命令就可以自动部署好所需环境                     |
| 稳定性 | 稳定性不高，不同系统差异大                                   | 稳定性好，不同系统都一样部署方式                     |





### 3.打包、分发、部署

**打包**：就是把你软件运行所需的依赖、第三方库、软件打包到一起，变成一个安装包

**分发**：你可以把你打包好的“安装包”上传到一个镜像仓库，其他人可以非常方便的获取和安装

**部署**：拿着“安装包”就可以一个命令运行起来你的应用，自动模拟出一摸一样的运行环境，不管是在Windows/Mac/Linux。





### 4.重要概念：镜像、容器

**镜像**：可以理解为软件安装包，可以方便的进行传播和安装。

**容器**：软件安装后的状态，每个软件运行环境都是独立的、隔离的，称之为容器。







### 5.docker安装地址

【https://docs.docker.com/engine/install/#server】





### 6.构建docker 镜像

#### 创建Dockerfile

创建Dockerfile【没有后缀】，创建目录通常放置在项目的根目录下

```
cloudcap_view/
│
├── src/
│   └── ...            # 源代码文件夹
│
├── public/
│   └── ...            # 公共资源文件夹
│
├── node_modules/
│   └── ...            # Node.js 模块文件夹
│
├── .gitignore
├── package.json
├── package-lock.json
├── Dockerfile         # Dockerfile 放在项目根目录下
└── README.md
```





```
# 使用 Node.js 官方镜像
FROM node:11

# 设置工作目录
WORKDIR /app

# 复制应用程序文件到工作目录
COPY . .

# 安装应用程序的依赖
RUN npm install

# 暴露应用程序端口（根据需要修改）
EXPOSE 3000

# 启动应用程序
CMD ["npm", "start"]
```











#### 构建 Docker 镜像

> docker build -t test:v1 .



`docker build`: 这是 Docker 命令行工具中的一个子命令，用于构建 Docker 镜像。



`-t test:v1`: `-t` 是一个标记选项（tag option），用来给构建的镜像指定一个名字和标签。在这个例子中，`test` 是镜像的名称，`v1` 是标签。这个标签通常用来标识镜像的版本。例如，`test:v1` 表示名称为 `test` 的镜像，其版本标签为 `v1`。



`.`: 这是构建上下文的路径，表示 Dockerfile 所在的目录。`.` 表示当前目录。Docker 将从这个目录读取 Dockerfile 和其他文件（如果 Dockerfile 中有 `COPY` 指令）。
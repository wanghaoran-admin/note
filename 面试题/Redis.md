### 	1. 缓存穿透

缓存穿透是指客户端查询一个**数据库中不存在**的键，由于缓存中也没有相应的记录，因此请求会直接打到数据库，导致数据库的压力增大。如果恶意用户频繁发送这样的请求，会引发**缓存穿透**



**解决缓存穿透的常见方法**

**1. 缓存空结果：**对数据库返回的空值也进行缓存，防止重复请求。

**2. 使用布隆过滤器：**进行过滤





------





### 2. 缓存击穿

**缓存击穿** 是指在某个热点键（key）失效的瞬间，有大量请求并发访问该键，导致这些请求直接打到数据库，给数据库带来巨大压力。



**解决缓存击穿的常见方法**

**1.设置热点数据永不过期：**缓存热点数据时，定期更新缓存，而不是依赖缓存自动过期。

**2.使用互斥锁/分布式锁：**当缓存失效时，只有一个线程能更新缓存，其他线程等待或返回兜底数据。





------





### 3. 缓存雪崩

**缓存雪崩** 是指缓存中大量的数据在同一时间失效，导致所有请求直接访问数据库，瞬间给数据库带来巨大压力，可能导致数据库宕机，甚至引发整个系统的不可用。



**c缓存雪崩的常见方法：**

**1.缓存预热：**提前加载热点数据到缓存中，避免高并发时缓存未命中。

**2.过期时间随机化：**将缓存的过期时间设置为一个随机范围，避免大量缓存同时失效。





------





### 4. 双向一致性

当修改了数据库的数据也要同时更新缓存的数据，缓存和数据库的数据要保持一致



**常见解决方案**

**延迟双删**：删除缓存--------->修改数据库--------->延时删除缓存

**canal通知**

**消息队列**





------





### 5. 缓存持久化

**缓存持久化**是指将缓存中的数据以某种形式存储到磁盘或其他持久化存储设备中，以确保在缓存服务重启或故障后能够快速恢复数据的一种机制



**常见解决方案**

**1. RDB（Redis DataBase Snapshot）**

**原理**：将当前的内存数据以快照（Snapshot）的形式保存到磁盘文件中。

**特点**：

- 数据是按时间点保存的，不是实时的。
- 文件体积小，适合做数据备份。
- 恢复速度快。

**配置**： 在 Redis 配置文件中，可以设置触发快照的条件，例如：

```
save 900 1   # 900秒内如果有1次写操作，就触发快照。
save 300 10  # 300秒内如果有10次写操作，就触发快照。
save 60 10000 # 60秒内如果有10000次写操作，就触发快照。
```

**适用场景**：适合对实时性要求不高的场景。





**2. AOF（Append-Only File）**

**原理**：将每一条写操作命令以日志形式追加到文件中（类似 MySQL 的 binlog）。

**特点**：

- 数据更实时，每次写操作都会记录。
- 文件体积较大。
- 可以通过配置文件设置不同的同步策略：
  - `always`：每次操作都同步到磁盘，最安全但性能较低。
  - `everysec`：每秒同步一次，默认推荐，性能与安全性平衡。
  - `no`：不主动同步，操作系统决定何时写入。

**配置**： 在 Redis 配置文件中，开启 AOF 并设置策略：

```
appendonly yes
appendfsync everysec
```

**适用场景**：适合对数据一致性要求高的场景。





------





### 6. 缓存过期策略

**惰性删除**

- **描述**：惰性删除策略意味着 Redis 只有在尝试访问过期的缓存数据时，才会检查并删除它。

  ​           这种策略 的优点是避免了对所有键的定时检查，但缺点是过期数据可能在一段时间内仍会被访问到。

- **适用场景**：适用于对数据实时性要求不高的场景，或者不需要立即删除过期数据的场景。

  

 **定期删除**

- **描述**：定期删除策略会定期扫描 Redis 中的所有过期缓存，并将过期的缓存项删除。

  ​       	通常是每 100 毫秒执行一次定时任务，删除一定数量的过期键。

- **适用场景**：适用于需要定期清理过期数据的场景，避免长时间存在过期数据影响系统性能。







### 7. 缓存淘汰策略













### 8. redis分布式锁使用场景

一个电商网站在用户支付时，为防止用户多次点击支付按钮导致重复扣款，可以使用 Redis 分布式锁。

某些热门商品的库存信息缓存可能会在某一时刻过期，这时多个请求同时到达，可能导致缓存击穿。

系统中可能有一个定时清理任务，需要定期清理过期的缓存或数据。如果没有锁机制，多个节点可能同时执行任务。





------







### 9. redis分布式锁实现原理







### 10. Redis 数据类型有哪些

字符串（String）

哈希（Hash）

列表（List）

集合（Set）

有序集合（Sorted Set，ZSet）

Geo（地理位置）







### 11. 主从复制

单节点Redis的并发能力是有上限的，要进一步提高Redis的并发能力，就需要搭建主从集群，实现读写分离。



![img](https://i-blog.csdnimg.cn/direct/d8d71b155c3148adbe053c2d89e39716.png)



集群中有一个master节点、两个slave节点（现在叫replica）

- 如果是写操作，应该访问master节点，master会自动将数据同步给两个slave节点
- 如果是读操作，建议访问各个slave节点，从而分担并发压









### 12. 哨兵模式

用于监控 Redis 主从复制架构，确保 Redis 在主节点发生故障时能够自动进行故障转移，并且通知客户端新的主节点。





### 13. redis脑裂

网络导致redis没有及时响应，导致哨兵模式自动选举下一个主节点。从节点会自动同步子节点就会导致数据丢失







### 14. redis分片集群有什么作用

集群中有多个master节点，每个保存不同的数据

每个master都有多个子节点

master之间通过ping监测彼此的状态





### 15. 分片集群中是怎么存储和读取的

Redis 分片集群引入了哈希槽的概念，Redis 集群有 16384 个哈希槽
将16384个插槽分配到不同的实例
读写数据:根据key的有效部分计算哈希值，对16384取余。余数做为插槽，寻找插槽所在的实例







### 16. redis中单线程吗

是单线程

redis纯内存操作，执行速度快

使用I/O多路复用模型，非阻塞IO




## Redis

### 缓存穿透

缓存穿透是指客户端查询一个**数据库中不存在**的键，由于缓存中也没有相应的记录，因此请求会直接打到数据库，导致数据库的压力增大。如果恶意用户频繁发送这样的请求，会引发**缓存穿透**



**解决缓存穿透的常见方法**

**1. 缓存空结果：**对数据库返回的空值也进行缓存，防止重复请求。

**2. 使用布隆过滤器：**进行过滤





------





### 缓存击穿

**缓存击穿** 是指在某个热点键（key）失效的瞬间，有大量请求并发访问该键，导致这些请求直接打到数据库，给数据库带来巨大压力。



**解决缓存击穿的常见方法**

**1.设置热点数据永不过期：**缓存热点数据时，定期更新缓存，而不是依赖缓存自动过期。

**2.使用互斥锁/分布式锁：**当缓存失效时，只有一个线程能更新缓存，其他线程等待或返回兜底数据。





------





### 缓存雪崩

**缓存雪崩** 是指缓存中大量的数据在同一时间失效，导致所有请求直接访问数据库，瞬间给数据库带来巨大压力，可能导致数据库宕机，甚至引发整个系统的不可用。



**c缓存雪崩的常见方法：**

**1.缓存预热：**提前加载热点数据到缓存中，避免高并发时缓存未命中。

**2.过期时间随机化：**将缓存的过期时间设置为一个随机范围，避免大量缓存同时失效。





------





### 双向一致性

当修改了数据库的数据也要同时更新缓存的数据，缓存和数据库的数据要保持一致



**常见解决方案**

**延迟双删**：删除缓存--------->修改数据库--------->延时删除缓存

**canal通知**

**消息队列**





------





### 缓存持久化

**缓存持久化**是指将缓存中的数据以某种形式存储到磁盘或其他持久化存储设备中，以确保在缓存服务重启或故障后能够快速恢复数据的一种机制



**常见解决方案**

**1. RDB（Redis DataBase Snapshot）**

**原理**：将当前的内存数据以快照（Snapshot）的形式保存到磁盘文件中。

**特点**：

- 数据是按时间点保存的，不是实时的。
- 文件体积小，适合做数据备份。
- 恢复速度快。

**配置**： 在 Redis 配置文件中，可以设置触发快照的条件，例如：

```
save 900 1   # 900秒内如果有1次写操作，就触发快照。
save 300 10  # 300秒内如果有10次写操作，就触发快照。
save 60 10000 # 60秒内如果有10000次写操作，就触发快照。
```

**适用场景**：适合对实时性要求不高的场景。





**2. AOF（Append-Only File）**

**原理**：将每一条写操作命令以日志形式追加到文件中（类似 MySQL 的 binlog）。

**特点**：

- 数据更实时，每次写操作都会记录。
- 文件体积较大。
- 可以通过配置文件设置不同的同步策略：
  - `always`：每次操作都同步到磁盘，最安全但性能较低。
  - `everysec`：每秒同步一次，默认推荐，性能与安全性平衡。
  - `no`：不主动同步，操作系统决定何时写入。

**配置**： 在 Redis 配置文件中，开启 AOF 并设置策略：

```
appendonly yes
appendfsync everysec
```

**适用场景**：适合对数据一致性要求高的场景。





------





### 缓存过期策略



### 缓存淘汰策略



### redis分布式锁使用场景



### redis分布式锁实现原理









## 微服务

### springcloud-常见组件有哪些

服务注册与发现、配置管理、负载均衡、分布式调用、熔断降级、消息队列等功能





------





### 负载均衡策略

1. **轮询**

2. **加权轮询**

3. **最少连接**

4. **加权最少连接**

5. **地址哈希**
6. **随机**
7. **自定义负载均衡策略**





------





### 服务雪崩、熔断、降级

**服务雪崩**是指当一个服务故障时，由于微服务之间的紧密依赖关系，故障会像雪崩一样蔓延，最终可能导致系统的大规模不可用。

**熔断**熔断器会在服务调用发生错误时打开，停止对该服务的请求，从而避免请求堆积在故障服务上，导致更严重的性能问题或故障。

**服务降级**是指在系统负载过大、某些功能出现问题或外部服务不可用时，主动关闭某些非核心功能，保证系统的核心功能可以正常运行。





### **CAP定理**和**BASE理论**







## JVM调优







## 并发编程







## 场景题





## 常见集合





## 框架





## 数据库